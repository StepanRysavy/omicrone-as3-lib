package com.omicrone.physics {		import com.omicrone.Log;		import flash.display.DisplayObject;	import flash.display.MovieClip;	import flash.events.Event;		public class World {				private var _stepper:MovieClip;		private var _forces:Array;		private var _objects:Array;				public function World(stageMC:DisplayObject = null, useBasicGravity:Boolean = true) {			Log.add("init", this);						_stepper = new MovieClip();						_objects = new Array();			_forces = new Array();						if (stageMC != null) if (stageMC.stage != null) if (useBasicGravity) addForce (new Force (0, stageMC.stage.stageHeight));		}				// public functions				public function addObject (mc:DisplayObject, speed:Number = 0, angle = 0):void {			Log.add("nový objekt ve světe: " + mc, this);			_objects.push(new WorldObject(mc, speed, angle));			if (!_stepper.hasEventListener(Event.ENTER_FRAME)) _stepper.addEventListener(Event.ENTER_FRAME, stepper);		}				public function addForce (force:Force):void {			Log.add("nový prvek síly ve světe: " + force, this);			_forces.push(force);			if (!_stepper.hasEventListener(Event.ENTER_FRAME)) _stepper.addEventListener(Event.ENTER_FRAME, stepper);		}				// private functions				private function stepper (e:Event):void {			if (_forces.length > 0 && _objects.length > 0) {				for (var i:uint = 0; i < _objects.length; i++) {					checkObjectForForces(_objects[i]);				}			} else {				Log.add("pro aktivaci světa zde není dostatek objektů a sil", this);				_stepper.removeEventListener(Event.ENTER_FRAME, stepper);			}		}				private function checkObjectForForces(mc:WorldObject):void {			var influence:Force = new Force (mc.object.x, mc.object.y+2, true, 0,  false);			var wageOfInfluence:Number = distanceToForce (mc.object, _forces[0]);			for (var i:uint = 0; i < _forces.length; i++) {				influence.update(_forces[i], wageOfInfluence / distanceToForce(mc.object, _forces[i]), mc);			}			mc.update(influence);		}				private function distanceToForce (mc:DisplayObject, force:Force):Number {			var dist:Number = 1;						return dist;		}	}}